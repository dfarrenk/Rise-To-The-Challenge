{{> challenge_nav }}
<main>
   <div class="cont arialoverride">
      <h5>{{ dataValues.Template.dataValues.name }}</h5>
      {{!--<div class="Form">--}}
      <h5>Challenge Status: {{ dataValues.state }}</h5>
      <div class="card collection">
         <h5>Rules:</h5>
         <div class="">
            <p>{{ dataValues.Template.dataValues.rule }}</p>
         </div>
         {{#if dataValues.state_code }} {{> state_challenge_accepted }} {{/if}}
         {{#unless dataValues.state_code }} {{> state_challenge_issued }} {{/unless}}
      </div>
      <form class="input-field scale-transition scale-out" id="proofForm">
         <input id="proofLink" type="text" class="validate" style="width:80%">
         <label for="proofLink">Link</label>
         <button id="proofLinkButton" type="button" class="btn-floating btn-large"><i class="material-icons">arrow_forward</i></button>
      </form>
      {{!--</div>--}}
   </div>
</main>
<!-- Modal Structure -->
<div id="proof" class="modal modal-fixed-footer">
   <div class="modal-content">
      <p class="right-align">Challenger's Proof</p>
      <div class="row" style="margin-top: 1.25rem;">
         <!-- ===================================== -->
         <iframe id="player" width="100%" height="345" src="" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
      </div>
   </div>
   <div class="modal-footer">
      <a id="exitModal" class="modal-action modal-close waves-effect waves-green btn-flat">close</a>
   </div>
</div>
<script type="text/javascript">
   const link = `{{dataValues.challenger_proof}}?rel=0&amp;showinfo=0`;

   $("#proof").modal({
      complete: function() {
         $("iframe").attr("src", "");
      }
   });

   $("#challenger_proof").on("click", function() {
      console.log("opening");
      $("iframe").attr("src", link);
      $("#proof").modal("open");
   });

   $("#proofSub").click(function() {
      $("#proofForm").toggleClass("scale-out").toggleClass("scale-in");
   });
</script>
